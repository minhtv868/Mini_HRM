@using IC.WebJob.Helpers;
@using Hangfire.Storage;
@model List<RecurringJobDto>
@{
    Layout = null;
}
<table id="sticky-table" class="main-table table table-striped table-hover mb-0">
    <thead class="text-black">
        <tr>
            <th class="pt-1 pb-1" colspan="5">
                <div class="row flex-between-center">
                    <div class="col-auto col-sm-auto d-flex align-items-center pe-0">
                        <h6 class="mb-0 text-nowrap total-rows fw-semi-bold">Tìm thấy <span class="text-danger">@Model.Count.NumberFormat()</span> bản ghi</h6>
                    </div>
                </div>
            </th>
        </tr>
        <tr>            
            <th class="align-middle text-nowrap">Tên Job</th>
            <th class="align-middle text-nowrap">Lịch</th>
            <th class="align-middle text-nowrap">Tiếp theo</th>
            <th class="align-middle text-nowrap text-center">Lần thực hiện trước</th>
            <th class="align-middle text-nowrap text-center">Thời gian tạo</th>
        </tr>
    </thead>
    <tbody>
        @if (Model != null && Model.Any())
        {
            @foreach (var item in Model)
            {
                <tr id="@item.Id" class="align-middle">                    
                    <td class="text-wrap">
                        @item.Id
                    </td>
                    <td class="align-middle text-nowrap">
                        @item.Cron
                    </td>
                    <td class="align-middle text-nowrap">
                        @(item.NextExecution.HasValue ? item.NextExecution.Value.ToLocalTime().TimeLeft() : "-")
                    </td>
                    <td class="align-middle text-nowrap text-center">
                        @(item.LastExecution.HasValue ? item.LastExecution.Value.ToLocalTime().TimeAgo() : "-")
                    </td>
                    <td class="align-middle text-nowrap text-center">
                        @(item.CreatedAt.Value.ToLocalTime().ToStringFormat())
                    </td>
                </tr>
            }
        }
        else
        {
            <tr class="align-middle text-warning fs--1 not-found text-center">
                <td colspan="5">Chưa có dữ liệu</td>
            </tr>
        }
    </tbody>
</table>
